//-----------------------------------------------------------------------------
//	Project Script
//-----------------------------------------------------------------------------

$Macro SRCDIR		"..\..\.."
$Macro OUTBINDIR	"..\..\..\..\game\bin"

$Include "$SRCDIR\vpc_scripts\source_exe_con_base.vpc"

$Configuration
{
	$Compiler
	{
		$AdditionalIncludeDirectories	"$BASE,$SRCDIR\thirdparty\SQUIRREL3\include;$SRCDIR\thirdparty\SQUIRREL3\squirrel;$SRCDIR\thirdparty\SQUIRREL3\sqplus"
		$PreprocessorDefinitions		"$BASE;PROTECTED_THINGS_DISABLE;VSQUIRREL_TEST"
	}
}

$Configuration "Debug"
{
	$Compiler
	{
		$PreprocessorDefinitions			"$BASE;_DEBUG_DUMP"
	}
}

$Project "VSquirrel"
{
	$Folder "Source Files"
	{
		$File   "vscript_init.nut"
		{
			$Configuration
			{
				$CustomBuildStep
				{
					$CommandLine	"$SRCDIR\devtools\srcsrv\perl\bin\perl.exe $SRCDIR\devtools\bin\texttoarray.pl $(InputPath) g_Script_init> $(InputDir)$(InputName)_nut.h" [$WINDOWS]
					$CommandLine	"perl $SRCDIR\devtools\bin\texttoarray.pl $(InputPath) g_Script_init> $(InputDir)$(InputName)_nut.h" [$POSIX]
					$Description	"$(InputFileName) produces $(InputName)_nut.h"
					$Outputs		"$(InputDir)$(InputName)_nut.h"
				}
			}
		}
		$File	"main.cpp"
		$File 	"vsquirrel.cpp"
		$File   "vsquirrel_math.cpp"
	}

	$Folder	"Header Files"
	{
		$File	"$SRCDIR\public\vscript\ivscript.h"	
		$File	"$SRCDIR\public\vscript\vscript_templates.h"
		$File   "vsquirrel.h"
		$File   "vsquirrel_math.h"
	}
	
	$Folder "Squirrel Lang"
	{
		$Folder "Source Files"
		{
			$File 	"$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqapi.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqbaselib.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqclass.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqcompiler.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqdebug.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqfuncstate.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqlexer.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqmem.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqobject.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqstate.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqtable.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqvm.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\sqdbg\sqrdbg.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\sqdbg\sqdbgserver.cpp"
				{
					$Configuration
					{
						$Compiler
						{
							$WarningLevel						"Level 3 (/W3)"
							$Detect64bitPortabilityIssues		"No"
							$AdditionalOptions					"$BASE /EHa"
						}
					}
				}
		}

		$Folder "Header Files"
		{
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqarray.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqclass.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqclosure.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqcompiler.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqfuncproto.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqfuncstate.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqlexer.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqobject.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqopcodes.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqpcheader.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqstate.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqstring.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqtable.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\squserdata.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\squtils.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\squirrel\sqvm.h"
		}

		$Folder "SQSTDLib"
		{
			$File 	"$SRCDIR\thirdparty\SQUIRREL3\sqstdlib\sqstdaux.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\sqstdlib\sqstdblob.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\sqstdlib\sqstdmath.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\sqstdlib\sqstdrex.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\sqstdlib\sqstdstream.cpp" \
					"$SRCDIR\thirdparty\SQUIRREL3\sqstdlib\sqstdstring.cpp"
				{
					$Configuration
					{
						$Compiler
						{
							$WarningLevel						"Level 3 (/W3)"
							$Detect64bitPortabilityIssues		"No"
						}
					}
				}
		}

		$Folder "Public Header Files"
		{
			$File   "$SRCDIR\thirdparty\SQUIRREL3\include\sqconfig.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\include\sqstdaux.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\include\sqstdio.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\include\sqstdmath.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\include\sqstdstring.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\include\sqstdsystem.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\include\squirrel.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\include\sqrdbg.h"
			$File   "$SRCDIR\thirdparty\SQUIRREL3\include\sqdbgserver.h"
		}
	}
	$Folder	"Link Libraries"
	{
		$File	"$SRCDIR\lib\public\mathlib.lib"
	}
}

